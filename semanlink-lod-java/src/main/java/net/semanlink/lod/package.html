<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html><head><title>Untitled Document</title><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"><style type="text/css"><!--.kod {	font-family: "Courier New", Courier, mono;	/*font-size: 12px;*/	background-color: #FFFFCC;	border: 1px solid;	border-color: #999999;	margin-right: 40px;	margin-left: 40px;	margin-bottom: 12px;	margin-top: 12px;}.kod p {	margin-top: 2px;	margin-bottom: 2px;    text-align: left;}--></style></head><body><h2>Implementation of the Linked Data principles to publish RDF data with a  servlet.</h2><ul>  <li>publishes resources defined with &quot;slash&quot; URI served by a servlet.    These resources can be either &quot;Information Resources&quot; (IR) or &quot;Non    Information Resources&quot; (NIR).    In case    of NIR, implementation    of the &quot;HTTP-range 14&quot; recommendation (303 redirect)</li>  <li>dereferencing of resources outside the application namespace (HTTP proxy)</li>  <li>SPARQL endpoint</li></ul><h3>Generalities</h3><p>If we want to publish a set of NIRs, the first thing to do is to mintURIs for them, and then to make these URIs dereferenceable. We setup a web application  for that.</p><h4>Minting URIs for the resources ; servlet mappings</h4><p>Let webAppURL be the &quot;/&quot; terminated base URL for our web application  (something like &quot;http:127.0.0.1:8080/lod/&quot;) The URI of any NIR that  we  serve  of course start with this URL. We suppose that any NIR that   we have to publish has an identifier.</p><ul>  <li>Note: a servlet doesn't know the URL it runs at. It can infer it from an    HttpServletRequest, but it cannot do it during its init. As we need this    parameter, we have to    pass it to the servlet through an init parameter in the XML    Configuration file of the webapp (not the WEB-INF/web.xml, which is intallation    independent)</li>  <li>If all resources to be served are of the same kind, (and their identifier    do not contain &quot;/&quot;), we can think of publishing all of them directly with    URIs of the form[webAppURL][nirId]. We could therefore define a unic servlet-mapping  (in WEB-INF/web.xml).    <ul>      <li>However          <ul>            <li>we generally have several types of resources, and need therefore              several different paths for them:                <ul>                  <li>[webAppURL][resType1]/[nirId]</li>                  <li>[webAppURL][resType2]/[nirId]</li>                  <li>...</li>                </ul>            </li>            <li>we also have to reserve some servletPaths for other purposes              (or use different servlets for these purposes)</li>          </ul>      </li>      <li>So we have to        <ul>          <li>reserve one or several mappings for the NIRs (declare them in web.xml)            <ul>              <li>if we use only one (and we have different types of resources),                this implies that the URIs for the resources start at least with                something such as [webAppURL]constant/ (or have some form of                constant identifying the fact that they must be interpreted as                a resource by the web app). This is not very pretty</li>            </ul>          </li>          <li>use other mappings for the other tasks</li>        </ul>      </li>    </ul>  </li>  <li>Note regarding identifiers: identifiers as they are in the legacy systems    may have to be converted to a form that do not contain some characters (characters    that are not allowed in URIs, characters that give problems in SPARQL requests,...)</li></ul><h4>URIs for a NIR, and its  RDF and HTML representations</h4><p>We have to define how we contruct the URIs for the RDF and HTML representations  of a given NIR, and how we pass from one to the other (for instance, how we  deduce the URI of the NIR from the URI of the corresponding HTML page.</p><h3>One or several servlets?</h3><p>It could be better to have different servlets for the different tasks (LOD  publishing, SPARQL endpoint, HTTP proxy)</p><h4>Dev note: How to share data structures between servlets in a webapp? </h4><p>Use the ServletContext (in a JSP: ServletContext servletContext = application;)  Store the structure in an attribute, use a long name for attribute, such as:</p><div class="kod"><p>ServletContext servletContext = application;<br/>DataStructure ds = (DataStructure)servletContext.getAttribute(&quot;net.semanlink.lod.dataStructure&quot;)</p></div><p>To initialize it once only, call in the init handlers of the servlets:</p><div class="kod">  <p>   if (ds == null) {</p>  <p> &nbsp;&nbsp;synchronized(servletContext) {<br>         &nbsp;&nbsp;&nbsp;&nbsp;ds = (DataStructure)servletContext.getAttribute(&quot;net.semanlink.lod.dataStructure&quot;);<br>       &nbsp;&nbsp;&nbsp;&nbsp;if (ds == null) {</p>  <p> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ds = new DataStructure(...);</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;servletContext.setAttribute(&quot;net.semanlink.lod.dataStructure&quot;,    ds);</p>  <p>&nbsp;&nbsp;&nbsp;&nbsp;}</p>  <p>&nbsp;&nbsp;}<br>    }</p></div><h3>Definition of the data to be served</h3><p>see {@link net.semanlink.lod.LODDataset class LODDataset}</p><p>A LODDataset is basically a Jena Model, with some rules that allows the LODServlet  to distinguish between IR and NIR, and how to construct the URIs of the RDF  and HTML representations corresponding to a NIR.</p><h3>Generation of the HTML page corresponding to a given NIR</h3><p>Could be on the server in JSP, but can also be on the client in Javascript.  That's what is implemented as of 2008/12.</p><h3>HTTP proxy</h3><h3>SPARQL endpoint</h3><p>&nbsp;</p><p>&nbsp;</p></body></html>