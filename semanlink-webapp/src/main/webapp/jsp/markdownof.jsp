<!--markdownof.jsp--><%@ page language="java" session="true" import="net.semanlink.servlet.*,net.semanlink.semanlink.*"%><%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %><%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %><%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %><%Jsp_Resource jsp = (Jsp_Resource) request.getAttribute("net.semanlink.servlet.jsp");boolean edit = (Boolean.TRUE.equals(session.getAttribute("net.semanlink.servlet.edit")));SLResource x = jsp.getSLResource();String uri = x.getURI();String markdownUri = x.getMarkdownUri(null);
if (!edit) {	if (markdownUri != null) {		%>		<script>		function doMarkdown() {			var mddiv = document.getElementById("md");			if (!(mddiv.innerHTML)) {				displayMarkdownDocument("<%=markdownUri%>");		    	event.target.src = "<%=request.getContextPath()%>/ims/box_open.gif";		    	mddiv.style.display = 'block';		    } else if (mddiv.style.display == 'block') {		    	event.target.src = "<%=request.getContextPath()%>/ims/box_closed.gif";		    	mddiv.style.display = 'none';		    } else {		    	event.target.src = "<%=request.getContextPath()%>/ims/box_open.gif";		    	mddiv.style.display = 'block';		    }		}		</script>		<div class="graybox">		<p><a href="#" onclick='doMarkdown();return false;'><img src="<%=request.getContextPath()%>/ims/box_closed.gif" alt=""/></a><%		    // inspired from docline.jsp @find doc2markdownHref // TODO 2019-05		    SLModel mod = SLServlet.getSLModel();		    String mdHref = mod.doc2markdownHref(jsp.getContextUrl(), markdownUri);	           if (mdHref != null) {	               %><a href="<%=mdHref%>">Markdown file</a><%	           } else {	           	%>Check provided md file <%=markdownUri%> (something wrong with it. Exist? end with .md?<%	           }		%></p>		<div id="md" class="markdown"></div>		</div><%	}} else { // edit	if (markdownUri == null) markdownUri = "";	%>	<div class="graybox">		<div class="what"><%=jsp.i18l("x.markdown")%></div>		<p>		<html:form action="setmarkdown">			<html:hidden property="uri" value="<%=uri%>" />			<textarea name="markdown" cols="80" rows="1"><%=markdownUri%></textarea>			<br/>			<html:submit property="<%=Action_SetOrAddProperty.SET%>"><%=jsp.i18l("x.setMarkdown")%></html:submit>		</html:form>		</p>	</div>    <%} // edit or not%><!--/markdownof.jsp-->