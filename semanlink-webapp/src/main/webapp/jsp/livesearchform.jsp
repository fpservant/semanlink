<!--livesearchform.jsp--><%@ page language="java" session="true" import="net.semanlink.semanlink.*,net.semanlink.servlet.*,net.semanlink.util.*, java.net.*, java.util.*, glguerin.io.*"%><%/** * @see livesearch.js, qui documente le hidden input avec le href de la ligne sélectionnée (highlighted) * (dans une première version, simple,  * liveSearchSubmit "cliquait" sur la ligne sélectionnée (ou la 1ere) : l'action n'était invoquée que * lorsque la recherche avait été infructueuse) */%><%	Jsp_Page jsp = (Jsp_Page) request.getAttribute("net.semanlink.servlet.jsp");	Jsp_Resource jsp_r = null;	if (jsp instanceof Jsp_Resource) jsp_r = (Jsp_Resource) jsp;	String linkPage = null;	Jsp_Document jsp_doc = null;	Jsp_Keyword jsp_kw = null;	if (jsp instanceof Jsp_Document)  {		jsp_doc = (Jsp_Document) jsp;	} else if (jsp instanceof Jsp_Keyword) {		jsp_kw = (Jsp_Keyword) jsp;	}	String uri = null;	if ((jsp_doc != null) || (jsp_kw != null)) uri = jsp_r.getUriFormValue();	boolean edit = (Boolean.TRUE.equals(session.getAttribute("net.semanlink.servlet.edit")));	String method, liveSearchSubmitFunction;	if (edit) {		method = "post";		liveSearchSubmitFunction = "liveSearchSubmit4Post";	} else {		method = "get";		liveSearchSubmitFunction = "liveSearchSubmit4Get";	}%><div class="browser">	<div class="title trigger"><%=jsp.i18l("livesearchform.search")%></div>
	<!-- div class="title trigger"><table><tr><td width="100%">jsp.i18l("livesearchform.search")</td><td></td></tr></table></div -->	<%// action should have another name than gokeyword.do which doesn't reflect at all what happens when editing%>	<form id="searchform" method="<%=method%>" onsubmit="return <%=liveSearchSubmitFunction%>();" action="<%=response.encodeURL(request.getContextPath()+"/gokeyword.do")%>">		<p align="center"><input type="text" id="livesearch" name="q" onkeypress="liveSearchStart()" size="17" tabindex="1" />		<input type="hidden" name="kwhref" value="" /><%//kwhref is documented with the href of the hghlighted line by liveSearchSubmitFunction%> 		<%if (edit) {			if (uri != null) {%>				<input type="hidden" name="targeturi" value="<%=uri%>" /><%//uri of this page (doc or tag)%>				</p><p align="center" style="padding-left:4px;padding-top:0px;padding-bottom:4px;padding-right:0px;margin:0">					<select name="actionprop">						<%if (jsp_doc != null) {%>							<option value="add2doc"><%=jsp.i18l("livesearchform.addToTags")%></option>						<%} else if (jsp_kw != null) { %>							<option value="add2parents"><%=jsp.i18l("livesearchform.addToParents")%></option>							<option value="add2friends"><%=jsp.i18l("livesearchform.addToFriends")%></option>
							<option value="add2children"><%=jsp.i18l("livesearchform.addToChildren")%></option>						<%}%>						<option value="go"><%=jsp.i18l("livesearchform.go")%></option>					</select>			<%} // if uri != null%>		<%} // i fedit %>		</p>	</form> 	<div id="LSResult" style="display: none;">		<div id="LSShadow" style="padding-left:4px">		</div>	</div></div> <%//browser%><!--/livesearchform.jsp-->