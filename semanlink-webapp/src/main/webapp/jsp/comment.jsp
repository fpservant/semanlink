<!--comment.jsp--><%@ page language="java" session="true" import="net.semanlink.servlet.*,net.semanlink.semanlink.*,java.util.*"%><%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %><%@ taglib uri="http://struts.apache.org/tags-html" prefix="html" %><%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %><%Jsp_Resource jsp = (Jsp_Resource) request.getAttribute("net.semanlink.servlet.jsp");boolean edit = (Boolean.TRUE.equals(session.getAttribute("net.semanlink.servlet.edit")));SLResource x = jsp.getSLResource();String uri = x.getURI();String comment = x.getComment();if (comment == null) comment = "";if (!edit) {	if ((comment != null) && (!("".equals(comment)))) {	 // the md is formatted once the page is loaded, cf. addOnLoadEvents("displayCommentAsMarkdown")	 // ATTENTION, pas d'espace dans la div	 %><div class="graybox"><div id= "slcomment" class="markdown" property="rdfs:comment"><%=comment%></div></div><%	  	} // comment !null} else { // edit	String docorkw;	if (x instanceof net.semanlink.semanlink.SLDocument) {		docorkw = "doc";	} else {		docorkw =  "kw";	}	%>	    <script>    function createCommentEditor() {        var $ = function (id) { return document.getElementById(id); };        new Editor($("slcommentedit"), $("slcomment"));    }    </script>			    <%    jsp.addOnLoadEvents("createCommentEditor");    %>				    <div class="graybox">          <div class="what"><%=jsp.i18l("x.comment")%></div>	    <div class="graybox"><div id= "slcomment" class="markdown" property="rdfs:comment"><%=comment%></div></div> 			<html:form action="setcomment">				<html:hidden property="uri" value="<%=uri%>" />				<html:hidden property="docorkw" value="<%=docorkw%>" />				<!-- html:textarea property="comment" cols="80" rows="6" value="commentaire !!!!" / -->				<div class="graybox"><textarea id="slcommentedit" name="comment" cols="80" rows="5" oninput="this.editor.update()" ><%=comment%></textarea>					<!-- html:hidden property="property" value="comment" / -->					<html:select property="lang">						<html:option value="-">-</html:option>						<html:option value="fr">fr</html:option>						<html:option value="en">en</html:option>						<html:option value="es">es</html:option>						<html:option value="pt">pt</html:option>					</html:select>					<html:submit property="<%=Action_SetOrAddProperty.SET%>"><%=jsp.i18l("x.setComment")%></html:submit>                </div>			</html:form>	</div>		<% // graybox} // edit or not%><!--/comment.jsp-->